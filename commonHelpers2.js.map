{"version":3,"file":"commonHelpers2.js","sources":["../src/js/2-form.js"],"sourcesContent":["import '../css/2-form.css';\n\nconst FEEDBACK_FORM_LS_KEY = 'feedback-form-state';\n\nconst feedbackFormRef = document.querySelector('.feedback-form');\n\nconst DEFAULT_FORM_DATA = { email: '', message: '' };\n\nlet formData = initializeFormData(DEFAULT_FORM_DATA, FEEDBACK_FORM_LS_KEY);\n\ninitializeFormTextFields(feedbackFormRef, formData);\n\nfeedbackFormRef.addEventListener('input', e => {\n  const { name, value } = e.target;\n  formData[name] = value;\n  window.localStorage.setItem(FEEDBACK_FORM_LS_KEY, JSON.stringify(formData));\n});\n\nfeedbackFormRef.addEventListener('submit', e => {\n  e.preventDefault();\n  const { email, message } = formData;\n  const userEmail = email.trim();\n  const userMessage = message.trim();\n\n  if (!userEmail || !userMessage) {\n    alert('Fill please all fields');\n    return;\n  }\n\n  console.log({ email: userEmail, message: userMessage });\n\n  e.currentTarget.reset();\n  window.localStorage.removeItem(FEEDBACK_FORM_LS_KEY);\n  formData = { ...DEFAULT_FORM_DATA };\n});\n\nfunction initializeFormData(defaultFormData, lsKey) {\n  const initFormData = { ...defaultFormData };\n\n  try {\n    const savedData = window.localStorage.getItem(lsKey);\n\n    if (!savedData) return initFormData;\n    const parsedData = JSON.parse(savedData);\n\n    for (const key of Object.keys(initFormData)) {\n      const value = parsedData[key];\n      if (!value) continue;\n      initFormData[key] = value;\n    }\n\n    return initFormData;\n  } catch (error) {\n    window.localStorage.removeItem(lsKey);\n    return { ...defaultFormData };\n  }\n}\n\nfunction initializeFormTextFields(formRef, initFormData) {\n  for (const [key, value] of Object.entries(initFormData)) {\n    const elRef = formRef.querySelector(`[name=\"${key}\"]`);\n    if (!elRef) return;\n    if (elRef.nodeName !== 'TEXTAREA' && elRef.nodeName !== 'INPUT') return;\n    elRef.value = value;\n  }\n}\n"],"names":["FEEDBACK_FORM_LS_KEY","feedbackFormRef","DEFAULT_FORM_DATA","formData","initializeFormData","initializeFormTextFields","e","name","value","email","message","userEmail","userMessage","defaultFormData","lsKey","initFormData","savedData","parsedData","key","formRef","elRef"],"mappings":"oDAEA,MAAMA,EAAuB,sBAEvBC,EAAkB,SAAS,cAAc,gBAAgB,EAEzDC,EAAoB,CAAE,MAAO,GAAI,QAAS,EAAE,EAElD,IAAIC,EAAWC,EAAmBF,EAAmBF,CAAoB,EAEzEK,EAAyBJ,EAAiBE,CAAQ,EAElDF,EAAgB,iBAAiB,QAASK,GAAK,CAC7C,KAAM,CAAE,KAAAC,EAAM,MAAAC,GAAUF,EAAE,OAC1BH,EAASI,CAAI,EAAIC,EACjB,OAAO,aAAa,QAAQR,EAAsB,KAAK,UAAUG,CAAQ,CAAC,CAC5E,CAAC,EAEDF,EAAgB,iBAAiB,SAAUK,GAAK,CAC9CA,EAAE,eAAc,EAChB,KAAM,CAAE,MAAAG,EAAO,QAAAC,CAAS,EAAGP,EACrBQ,EAAYF,EAAM,OAClBG,EAAcF,EAAQ,OAE5B,GAAI,CAACC,GAAa,CAACC,EAAa,CAC9B,MAAM,wBAAwB,EAC9B,MACD,CAED,QAAQ,IAAI,CAAE,MAAOD,EAAW,QAASC,CAAW,CAAE,EAEtDN,EAAE,cAAc,QAChB,OAAO,aAAa,WAAWN,CAAoB,EACnDG,EAAW,CAAE,GAAGD,EAClB,CAAC,EAED,SAASE,EAAmBS,EAAiBC,EAAO,CAClD,MAAMC,EAAe,CAAE,GAAGF,GAE1B,GAAI,CACF,MAAMG,EAAY,OAAO,aAAa,QAAQF,CAAK,EAEnD,GAAI,CAACE,EAAW,OAAOD,EACvB,MAAME,EAAa,KAAK,MAAMD,CAAS,EAEvC,UAAWE,KAAO,OAAO,KAAKH,CAAY,EAAG,CAC3C,MAAMP,EAAQS,EAAWC,CAAG,EACvBV,IACLO,EAAaG,CAAG,EAAIV,EACrB,CAED,OAAOO,CACR,MAAe,CACd,cAAO,aAAa,WAAWD,CAAK,EAC7B,CAAE,GAAGD,EACb,CACH,CAEA,SAASR,EAAyBc,EAASJ,EAAc,CACvD,SAAW,CAACG,EAAKV,CAAK,IAAK,OAAO,QAAQO,CAAY,EAAG,CACvD,MAAMK,EAAQD,EAAQ,cAAc,UAAUD,CAAG,IAAI,EAErD,GADI,CAACE,GACDA,EAAM,WAAa,YAAcA,EAAM,WAAa,QAAS,OACjEA,EAAM,MAAQZ,CACf,CACH"}